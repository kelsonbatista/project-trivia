{"ast":null,"code":"var _jsxFileName = \"/home/kelson/Projetos/trybe-projetos/16-sd-017-project-trivia-react-redux/src/pages/ScreenGame.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { requestToken, handleApi, setUserInfo } from '../action/index';\nimport '../styles.css';\n\nfunction ScreenGame(props) {\n  const TRINTA = 30;\n  const UM = 1;\n  const MIL = 1000;\n  const SCORE_INIT = 10;\n  const SCORE_EASY = 1;\n  const SCORE_MEDIUM = 2;\n  const SCORE_HARD = 3;\n  const MAX_QUESTIONS = 5;\n  const [numberRandom, setRandom] = useState(Math.random() * 100);\n  const [btnDisable, setBtnDisable] = useState(true);\n  const [index, setIndex] = useState(0);\n  const [Interval, setIntervallGame] = useState(TRINTA);\n  const [styleTrue, setStyleTrue] = useState({\n    border: '3px solid rgb(6, 240, 15)'\n  });\n  const [styleFalse, setStyleFalse] = useState({\n    border: '3px solid rgb(255, 0, 0)'\n  });\n  const {\n    player: {\n      name,\n      email,\n      score,\n      total,\n      assertions\n    }\n  } = props;\n  const [countQuestions, setCountQuestions] = useState(1);\n  useEffect(() => {\n    props.handleApi();\n    setInterval(() => {\n      setIntervallGame(Interval => Interval - UM);\n    }, MIL);\n    return () => clearInterval(Interval);\n  }, []);\n  useEffect(() => {\n    if (Interval <= 0) {\n      setBtnDisable(true);\n    } else {\n      setBtnDisable(false);\n    }\n  }, [Interval]);\n\n  function checkAnswer(_ref) {\n    let {\n      target\n    } = _ref;\n    let difficulty = 0;\n\n    if (props.questions[index].difficulty === 'easy') {\n      difficulty = SCORE_EASY;\n    } else if (props.questions[index].difficulty === 'medium') {\n      difficulty = SCORE_MEDIUM;\n    } else if (props.questions[index].difficulty === 'hard') {\n      difficulty = SCORE_HARD;\n    }\n\n    const isCorrect = target.getAttribute('data-testid').includes('correct');\n\n    if (isCorrect) {\n      const newScore = SCORE_INIT + Interval * difficulty;\n      const userInfo = {\n        name,\n        email,\n        score: score + newScore,\n        total: total + newScore,\n        assertions: assertions + 1\n      };\n      localStorage.setItem('player', JSON.stringify(userInfo));\n      props.dispatchUserInfo(userInfo);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"header-profile-picture\",\n    src: \"https://www.gravatar.com/avatar/c19ad9dbaf91c5533605fbf985177ccc\",\n    alt: \"img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    \"data-testid\": \"header-player-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, name), /*#__PURE__*/React.createElement(\"h3\", {\n    \"data-testid\": \"header-score\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, score)), props.questions.length > 0 && numberRandom <= 50 ? /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"answer-options\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"question-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, props.questions[index].category), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"question-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, props.questions[index].question), /*#__PURE__*/React.createElement(\"section\", {\n    \"data-testid\": \"answer-options\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    disabled: Interval <= 0 ? 'disabled' : btnDisable,\n    style: styleTrue,\n    \"data-testid\": \"correct-answer\",\n    onClick: event => checkAnswer(event),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, props.questions[index].correct_answer), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    style: styleFalse,\n    \"data-testid\": `wrong-answer-${index}`,\n    onClick: event => checkAnswer(event),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, props.questions[index].incorrect_answers[0]), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    style: styleFalse,\n    \"data-testid\": `wrong-answer-${index}`,\n    onClick: event => checkAnswer(event),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, props.questions[index].incorrect_answers[1]), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    style: styleFalse,\n    \"data-testid\": `wrong-answer-${index}`,\n    onClick: event => checkAnswer(event),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, props.questions[index].incorrect_answers[2]))) : props.questions.length > 0 && numberRandom > 50 && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"question-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, props.questions[index].category), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"question-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, props.questions[index].question), /*#__PURE__*/React.createElement(\"section\", {\n    \"data-testid\": \"answer-options\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    style: styleFalse,\n    \"data-testid\": `wrong-answer-${index}`,\n    onClick: event => checkAnswer(event),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, props.questions[index].incorrect_answers[0]), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    style: styleFalse,\n    \"data-testid\": `wrong-answer-${index}`,\n    onClick: event => checkAnswer(event),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 15\n    }\n  }, props.questions[index].incorrect_answers[1]), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    disabled: Interval <= 0 ? 'disabled' : btnDisable,\n    onClick: event => checkAnswer(event),\n    style: styleTrue,\n    \"data-testid\": \"correct-answer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  }, props.questions[index].correct_answer), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: event => checkAnswer(event),\n    style: styleFalse,\n    \"data-testid\": `wrong-answer-${index}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, props.questions[index].incorrect_answers[2]))), /*#__PURE__*/React.createElement(\"button\", {\n    \"data-testid\": \"btn-next\",\n    onClick: () => {\n      const {\n        history\n      } = props;\n      setCountQuestions(countQuestions + 1);\n      setIntervallGame(TRINTA);\n      setIndex(index + 1);\n\n      if (countQuestions === MAX_QUESTIONS) {\n        setCountQuestions(0);\n        history.push('/feedback');\n      }\n    },\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }\n  }, \"Proxima Pergunta\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  }, `Tempo: ${Interval}`)));\n}\n\nconst mapStateToProps = state => ({\n  player: state.player,\n  questions: state.questions\n});\n\nconst mapDispatchToProps = dispatch => ({\n  RequestToken() {\n    dispatch(requestToken());\n  },\n\n  dispatchUserInfo(score) {\n    dispatch(setUserInfo(score));\n  },\n\n  handleApi() {\n    dispatch(handleApi());\n  }\n\n});\n\nScreenGame.propTypes = {\n  player: PropTypes.instanceOf(Object).isRequired,\n  dispatchUserInfo: PropTypes.func.isRequired,\n  history: PropTypes.instanceOf(Object).isRequired\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(ScreenGame);","map":{"version":3,"sources":["/home/kelson/Projetos/trybe-projetos/16-sd-017-project-trivia-react-redux/src/pages/ScreenGame.jsx"],"names":["React","useState","useEffect","connect","PropTypes","requestToken","handleApi","setUserInfo","ScreenGame","props","TRINTA","UM","MIL","SCORE_INIT","SCORE_EASY","SCORE_MEDIUM","SCORE_HARD","MAX_QUESTIONS","numberRandom","setRandom","Math","random","btnDisable","setBtnDisable","index","setIndex","Interval","setIntervallGame","styleTrue","setStyleTrue","border","styleFalse","setStyleFalse","player","name","email","score","total","assertions","countQuestions","setCountQuestions","setInterval","clearInterval","checkAnswer","target","difficulty","questions","isCorrect","getAttribute","includes","newScore","userInfo","localStorage","setItem","JSON","stringify","dispatchUserInfo","length","category","question","event","correct_answer","incorrect_answers","history","push","mapStateToProps","state","mapDispatchToProps","dispatch","RequestToken","propTypes","instanceOf","Object","isRequired","func"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { requestToken, handleApi, setUserInfo } from '../action/index';\nimport '../styles.css';\n\nfunction ScreenGame(props) {\n  const TRINTA = 30;\n  const UM = 1;\n  const MIL = 1000;\n  const SCORE_INIT = 10;\n  const SCORE_EASY = 1;\n  const SCORE_MEDIUM = 2;\n  const SCORE_HARD = 3;\n  const MAX_QUESTIONS = 5;\n\n  const [numberRandom, setRandom] = useState(Math.random() * 100);\n  const [btnDisable, setBtnDisable] = useState(true);\n  const [index, setIndex] = useState(0);\n  const [Interval, setIntervallGame] = useState(TRINTA);\n  const [styleTrue, setStyleTrue] = useState({\n    border: '3px solid rgb(6, 240, 15)',\n  });\n  const [styleFalse, setStyleFalse] = useState({\n    border: '3px solid rgb(255, 0, 0)',\n  });\n  const { player: { name, email, score, total, assertions } } = props;\n  const [countQuestions, setCountQuestions] = useState(1);\n\n  useEffect(() => {\n    props.handleApi();\n    setInterval(() => {\n      setIntervallGame((Interval) => Interval - UM);\n    }, MIL);\n    return () => clearInterval(Interval);\n  }, []);\n\n  useEffect(() => {\n    if (Interval <= 0) {\n      setBtnDisable(true);\n    } else {\n      setBtnDisable(false);\n    }\n  }, [Interval]);\n\n  function checkAnswer({ target }) {\n    let difficulty = 0;\n    if (props.questions[index].difficulty === 'easy') {\n      difficulty = SCORE_EASY;\n    } else if (props.questions[index].difficulty === 'medium') {\n      difficulty = SCORE_MEDIUM;\n    } else if (props.questions[index].difficulty === 'hard') {\n      difficulty = SCORE_HARD;\n    }\n\n    const isCorrect = target.getAttribute('data-testid').includes('correct');\n    if (isCorrect) {\n      const newScore = SCORE_INIT + (Interval * difficulty);\n      const userInfo = {\n        name,\n        email,\n        score: score + newScore,\n        total: total + newScore,\n        assertions: assertions + 1,\n      };\n      localStorage.setItem('player', JSON.stringify(userInfo));\n      props.dispatchUserInfo(userInfo);\n    }\n  }\n\n  return (\n    <div>\n      <header>\n        <img\n          data-testid=\"header-profile-picture\"\n          src=\"https://www.gravatar.com/avatar/c19ad9dbaf91c5533605fbf985177ccc\"\n          alt=\"img\"\n        />\n        <h3 data-testid=\"header-player-name\">{name}</h3>\n        <h3 data-testid=\"header-score\">{score}</h3>\n      </header>\n      {props.questions.length > 0 && numberRandom <= 50 ? (\n        <div data-testid=\"answer-options\">\n          <p data-testid=\"question-category\">{props.questions[index].category}</p>\n          <p data-testid=\"question-text\">{props.questions[index].question}</p>\n\n          <section data-testid=\"answer-options\">\n            <button\n              type=\"button\"\n              disabled={ Interval <= 0 ? 'disabled' : btnDisable }\n              style={ styleTrue }\n              data-testid=\"correct-answer\"\n              onClick={ (event) => checkAnswer(event) }\n            >\n              {props.questions[index].correct_answer}\n            </button>\n\n            <button\n              type=\"button\"\n              style={ styleFalse }\n              data-testid={ `wrong-answer-${index}` }\n              onClick={ (event) => checkAnswer(event) }\n            >\n              {props.questions[index].incorrect_answers[0]}\n            </button>\n\n            <button\n              type=\"button\"\n              style={ styleFalse }\n              data-testid={ `wrong-answer-${index}` }\n              onClick={ (event) => checkAnswer(event) }\n            >\n              {props.questions[index].incorrect_answers[1]}\n            </button>\n\n            <button\n              type=\"button\"\n              style={ styleFalse }\n              data-testid={ `wrong-answer-${index}` }\n              onClick={ (event) => checkAnswer(event) }\n            >\n              {props.questions[index].incorrect_answers[2]}\n            </button>\n          </section>\n\n        </div>\n      ) : (\n        props.questions.length > 0\n        && numberRandom > 50 && (\n          <div>\n            <p data-testid=\"question-category\">{props.questions[index].category}</p>\n            <p data-testid=\"question-text\">{props.questions[index].question}</p>\n\n            <section data-testid=\"answer-options\">\n              <button\n                type=\"button\"\n                style={ styleFalse }\n                data-testid={ `wrong-answer-${index}` }\n                onClick={ (event) => checkAnswer(event) }\n              >\n                {props.questions[index].incorrect_answers[0]}\n              </button>\n\n              <button\n                type=\"button\"\n                style={ styleFalse }\n                data-testid={ `wrong-answer-${index}` }\n                onClick={ (event) => checkAnswer(event) }\n              >\n                {props.questions[index].incorrect_answers[1]}\n              </button>\n\n              <button\n                type=\"button\"\n                disabled={ Interval <= 0 ? 'disabled' : btnDisable }\n                onClick={ (event) => checkAnswer(event) }\n                style={ styleTrue }\n                data-testid=\"correct-answer\"\n              >\n                {props.questions[index].correct_answer}\n              </button>\n              <button\n                type=\"button\"\n                onClick={ (event) => checkAnswer(event) }\n                style={ styleFalse }\n                data-testid={ `wrong-answer-${index}` }\n              >\n                {props.questions[index].incorrect_answers[2]}\n              </button>\n            </section>\n          </div>\n        )\n      )}\n      <button\n        data-testid=\"btn-next\"\n        onClick={ () => {\n          const { history } = props;\n          setCountQuestions(countQuestions + 1);\n          setIntervallGame(TRINTA);\n          setIndex(index + 1);\n          if (countQuestions === MAX_QUESTIONS) {\n            setCountQuestions(0);\n            history.push('/feedback');\n          }\n        } }\n        type=\"button\"\n      >\n        Proxima Pergunta\n      </button>\n      <div>\n        <p>{`Tempo: ${Interval}`}</p>\n      </div>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  player: state.player,\n  questions: state.questions,\n\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  RequestToken() {\n    dispatch(requestToken());\n  },\n  dispatchUserInfo(score) {\n    dispatch(setUserInfo(score));\n  },\n  handleApi() {\n    dispatch(handleApi());\n  },\n});\n\nScreenGame.propTypes = {\n  player: PropTypes.instanceOf(Object).isRequired,\n  dispatchUserInfo: PropTypes.func.isRequired,\n  history: PropTypes.instanceOf(Object).isRequired,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ScreenGame);\n"]},"metadata":{},"sourceType":"module"}