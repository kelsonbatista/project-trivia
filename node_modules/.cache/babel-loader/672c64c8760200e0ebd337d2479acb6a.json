{"ast":null,"code":"import React,{useEffect}from'react';import{connect}from'react-redux';import TableApp from'../../components/Table';import Button from'../../components/Button';import{THREE}from'../../commons/constants';import'./style.css';function Feedback(props){var history=props.history,_props$player=props.player,name=_props$player.name,assertions=_props$player.assertions,score=_props$player.score,total=_props$player.total,gravatarEmail=_props$player.gravatarEmail;function checkAssertions(){if(assertions<THREE)return'Could be better...';return'Well Done!';}function handleRanking(){console.log('run function');var prevRanking=localStorage.getItem('ranking');if(prevRanking===null)prevRanking=[];else prevRanking=JSON.parse(prevRanking);var player={name:name,score:total,picture:gravatarEmail};if(Array.isArray(prevRanking)){prevRanking.push(player);localStorage.setItem('ranking',JSON.stringify(prevRanking));}}useEffect(function(){handleRanking();},[]);return/*#__PURE__*/React.createElement(\"div\",{className:\"feedback\"},/*#__PURE__*/React.createElement(\"section\",{className:\"feedback__left\"},/*#__PURE__*/React.createElement(\"div\",{className:\"feedback__header\"},/*#__PURE__*/React.createElement(TableApp,{className:\"feedback__profile-name\",classPicture:\"feedback__profile-picture\",classPictureImage:\"feedback__profile-image\",classScore:\"feedback__profile-score\",classTable:\"feedback__profile\",name:name,score:score,gravatarEmail:gravatarEmail})),/*#__PURE__*/React.createElement(\"div\",{className:\"feedback__body\"},/*#__PURE__*/React.createElement(\"h3\",{\"data-testid\":\"feedback-text\"},checkAssertions()),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"span\",null,\"Pontos: \"),/*#__PURE__*/React.createElement(\"span\",{\"data-testid\":\"feedback-total-score\"},score)),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"span\",null,\"Total: \"),/*#__PURE__*/React.createElement(\"span\",{\"data-testid\":\"feedback-total\"},total)),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"span\",null,\"Acertos: \"),/*#__PURE__*/React.createElement(\"span\",{\"data-testid\":\"feedback-total-question\"},assertions))),/*#__PURE__*/React.createElement(\"div\",{className:\"feedback__btn\"},/*#__PURE__*/React.createElement(Button,{className:\"play__btn\",dataTestid:\"btn-play-again\",onClick:function onClick(){return history.push('/game');},text:\"Play Again\",type:\"button\"}),/*#__PURE__*/React.createElement(Button,{className:\"ranking__btn\",dataTestid:\"btn-ranking\",onClick:function onClick(){return history.push('/ranking');},text:\"Ranking\",type:\"button\"}))),/*#__PURE__*/React.createElement(\"section\",{className:\"feedback__right\"},\"\\xA0\"));}var mapStateToProps=function mapStateToProps(state){return{player:state.player};};export default connect(mapStateToProps,null)(Feedback);","map":{"version":3,"sources":["/home/kelson/Projetos/trybe-projetos/16-sd-017-project-trivia-react-redux/src/pages/Feedback/index.js"],"names":["React","useEffect","connect","TableApp","Button","THREE","Feedback","props","history","player","name","assertions","score","total","gravatarEmail","checkAssertions","handleRanking","console","log","prevRanking","localStorage","getItem","JSON","parse","picture","Array","isArray","push","setItem","stringify","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport TableApp from '../../components/Table';\nimport Button from '../../components/Button';\nimport { THREE } from '../../commons/constants';\nimport './style.css';\n\nfunction Feedback(props) {\n  const { history, player: { name, assertions, score, total, gravatarEmail } } = props;\n\n  function checkAssertions() {\n    if (assertions < THREE) return 'Could be better...';\n    return 'Well Done!';\n  }\n\n  function handleRanking() {\n    console.log('run function');\n    let prevRanking = localStorage.getItem('ranking');\n\n    if (prevRanking === null) prevRanking = [];\n    else prevRanking = JSON.parse(prevRanking);\n\n    const player = {\n      name,\n      score: total,\n      picture: gravatarEmail,\n    };\n    if (Array.isArray(prevRanking)) {\n      prevRanking.push(player);\n      localStorage.setItem('ranking', JSON.stringify(prevRanking));\n    }\n  }\n\n  useEffect(() => {\n    handleRanking();\n  }, []);\n\n  return (\n    <div className=\"feedback\">\n      <section className=\"feedback__left\">\n        <div className=\"feedback__header\">\n          <TableApp\n            className=\"feedback__profile-name\"\n            classPicture=\"feedback__profile-picture\"\n            classPictureImage=\"feedback__profile-image\"\n            classScore=\"feedback__profile-score\"\n            classTable=\"feedback__profile\"\n            name={ name }\n            score={ score }\n            gravatarEmail={ gravatarEmail }\n          />\n        </div>\n        <div className=\"feedback__body\">\n          <h3 data-testid=\"feedback-text\">{ checkAssertions() }</h3>\n          <p>\n            <span>Pontos: </span>\n            <span data-testid=\"feedback-total-score\">{ score }</span>\n          </p>\n          <p>\n            <span>Total: </span>\n            <span data-testid=\"feedback-total\">{ total }</span>\n          </p>\n          <p>\n            <span>Acertos: </span>\n            <span data-testid=\"feedback-total-question\">{ assertions }</span>\n          </p>\n        </div>\n        <div className=\"feedback__btn\">\n          <Button\n            className=\"play__btn\"\n            dataTestid=\"btn-play-again\"\n            onClick={ () => history.push('/game') }\n            text=\"Play Again\"\n            type=\"button\"\n          />\n          <Button\n            className=\"ranking__btn\"\n            dataTestid=\"btn-ranking\"\n            onClick={ () => history.push('/ranking') }\n            text=\"Ranking\"\n            type=\"button\"\n          />\n        </div>\n      </section>\n      <section className=\"feedback__right\">\n        &nbsp;\n      </section>\n    </div>\n  );\n}\n\nFeedback.propTypes = {\n  player: PropTypes.object,\n}.isRequired;\n\nconst mapStateToProps = (state) => ({\n  player: state.player,\n});\n\nexport default connect(mapStateToProps, null)(Feedback);\n"]},"metadata":{},"sourceType":"module"}